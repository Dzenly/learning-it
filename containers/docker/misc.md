https://www.youtube.com/watch?v=0mil0KBK4Tw

https://www.youtube.com/watch?v=tQ8F7d2VACU

Вроде есть настройки квот для контейнера.

5% оверхед.

Если есть возможность сохранить контейнер и дать разрабу - он сможет у себя на контейнере воспроизвести.

CentOS / SELinux - проблемы.

===========

Иерархическая система образов.

==========

Похоже, докер сильно кэширует.

? Но ведь одна и та же команда может привести к разным результатам ?
memoise, кэш чистых функций.

UFS. Union FS.

БД - особый вид контейнера.

Win 10 professional и выше поддерживает докер.

docker commit - image из контейнера.
? Сохраняет ли состояние RAM ?

cgroups юзается, но не весь LXC ещё.

=======

docker images - все образы в системе.

docker pull debian - вытянуть.

Т.е. иерархически, стягиваются и зависимости.

docker run debian

docker run - можно задавать квоты.

docker run -i -t debian (interactive tty)

docker ps - запущенные контейнеры.

/etc/issue
=====

docker

10% образов с докерхаба содержат malware.

===========

Хорошая практика наследоваться только от проверенных контейнеров, где 100% знаешь что лежит.

========================

?? Если докер на каждую команду создает слой, не замедляет ли это работу и не засоряет ли винт,
можно ли это отключить?

?? Что если в Dockerfile команда вернет не 0.

=================

# Dockerfile

FROM node:6-onbuild
EXPOSE 3000
RUN - как запускать контейнер, например, npm start.

У node например есть Dockerfile, в нем есть команды для сборки.
github.com/nodejs/docker-node/../onbuild/Dockerfile.

Лучше юзать Dockerfile, чем кучу commit. Т.к. точно знаешь что происходит.

===

run -d - демонизировать.

-p снаружи:внутри

====================

docker build -t name
.dockerignore

docker run -it demo1 что_запускать.

WORKDIR /usr/src/app
RUN npm i
CMD ["npm", "start"]

=====

Не стоит в контейнере хранить приватную инфу.

=====

ENV

12-factor app.

============

Все конфиги в переменных окружения.

============

docker run -e VARNAME=asfasdf
?? А можно ли подсовывать файл с окружением?

ARG VARNAME=Значениепоумолчанию.
Переменная внутри скрипта.

docker buid --build-arg PORT=8000

Если передашь переменные, которые не используются - будет ошибка.


build-arg нельзя переопределить при запуске.

postinstall не запускается в неинтерактивном режиме.

*Один контейнер - один сервис.*

Если контейнер вывалится - мы не узнаем логи.

docker logs - выводит консольный вывод.
Чем изолированней сервисы - тем информационней лог.

=========

Docker compose

links - использует /etc/hosts. Или микро dns resolver.
Поэтому контейнеры, сделанные через docker compose нужно перезапускать все вместе.

По умолчанию контейнер если упал - лежит.

Но можно юзать restart опцию.

volumes. VOLUMES.
монтирование.

-v /outDir:/inDir.

v - volume

При ошибке npm i ошибка и в docker build.

docker-compose up.

docker exec - запустить на существующем контейнере.

===============

Докер


Команда apt-get update должна быть объеденена с apt-get install.


docker build --no-cache=true. Но это для дебага.

ADD - опасная команда.
Имеет смысл использовать для распаковки архива из инета.

Контейнеры похоже кэшируются покомандно.

a && b && c - одна команда.

Логирование в продакшн - надо заморочиться.

==========

Если уязвимость - надо проверить все образы FROM.

docker export (теряет мета инфу) vs docker save.

volum-container

docker run -d --volumes-from volContName -name db1 training/pg

СХД - Сетевое Хранилище Дисков.

Go + Docker - идеал. Приложению GO не надо зависимостей.
Соответственно можно собрать пустой контейнер.

Написан на go.

https://www.youtube.com/watch?v=YJSASehcfqI

Даже на фронте можно конфигурацию поставлять извне, и
подгружать в виде JS файла.


https://www.youtube.com/watch?v=FqUUS8xAEYw

Проект может деплоиться by Lerna.






















































