https://www.youtube.com/watch?v=nHkLxts9Mu4

git commit - это объект в key-value map.

Тип объекта, ссылка на объект, мета инфа о коммите.

Сам объект tree - содержит ссылки на другие tree и blobs (и наверное симлинки).

(а ещё у коммитов есть parent).

tree - содержит связи с файлами.
Если два файла содержат одинаковый контент, то он будет ссылаться на один и тот же blob.

Получается если хэш уникальный, то в гите не тратятся ресурсы на повторяющиеся файлы,
даже если эти файлы называются по-разному и лежат по разным путям.

Обычно файловые системы делают подобное.

Commit - версия файловой системы проекта.

@@ ?? Есть еще тэги, нужно поучить.


# Branching and merging.

Branch.

refs/heads/ - перечислены ветки, имена файлов соответствуют веткам.
Внутри файла - хэш коммита.
Т.е. указатель на коммит.


При коммитах в бранч, HEAD продолжая указывать на этот же бранч, уже указывает на последний коммит.


HEAD изменяется при checkout.

Ещё при checkout перечитывается tree и пересоздается рабочая директория.

?? Что если какие-то файлы изменены ??


Лучше всего считать working area очень хрупкой.

Лучше коммитить, если нет нужды оставлять что-то незакоммиченным.

git checkout master
git merge second
git checkout second
git merge master - это FAST Forward. Т.е. перемещаются только указатели, данные в базе объектов git остаются прежними.












