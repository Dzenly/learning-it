Коммит в GIT - это объект, который содержит:

* указатель на снимок состояния, записанный ранее в индекс.
* метаданные автора и комментария,
* ноль или более указателей на коммиты - прямые предки. Ноль для первого. Один для обычного коммита. Больше одного - для коммита, полученного в результате слияния двух и более веток.


Создаем проект и добавляем три файла.

# Stage

* для каждого файла вычисляется чексумма SHA-1.
* файл сохраняется в Git репозитории (как blob)
* добавляет эту чексумму в staging area (индекс)

# Commit

* Checksum for each subdirectory
* Сохраняет tree objects в репозитории.
* Создается commit object, который содержит метаданные и указатель на рутовое дерево проекта.
* Все это чтобы создать снэпшот, когда понадобится

Сейчас в репозитории 5 объектов:

* blob для каждого файла
* tree со списком контента директории и указанием какие имена файлов для каких блобов
* коммит с указателем на рутовое дерево и метаданными

Ветка - подвижный указатель на один из коммитов. Файл, 40 символов контрольной суммы SHA-1 коммита, на который он указывает + символ новой строки.

Ветка по умолчанию - master.

При создании новой ветки (**git branch** (создает новую ветку, но не переключает на созданную ветку))- создается новый указатель, который можно будет перемещать.

**HEAD** - указатель на текущую локальную ветку. Эта ветка пойдет вперед с каждым коммитом.

**git checkout** - переходит на ветку. При этом Git устанавливает Working Directory в состояние, как осле последнего коммита в ветку (на которую переключились).

**git checkout -b** - создает ветку и переходит на неё.

Если в Working Directory или Staging Area есть незакоммиченные изменения, конфликтующие с веткой, на которую вы хотите переключиться, Git не даст переключиться.

Хорошо иметь clean working state при переключении на другую ветку.

Если это нежелательно есть Stashing and Commit amending (они рассматриваются в соответствующих главах).



=====

Чтобы вмержить ветку в мастер:

git checkout master
git merge hotfix

Fast forward master to hotfix.

===

Удалить ветку:

git branch -d hotfix

===

git merge master - вмерживает master в текущую ветку.

===========

Если fast forward невозможен Git создает новый snapshot - результат 3-way merge и автоматом создает новый коммит, указывающий на этот snapshot (**merge commit**), этот коммит имеет более одного родителя.

??Что если сделать коммит в ветку, которую уже вмержили в другую??


==========

## Конфликты:

При конфликтах Git не создает автоматический merge commit. Он замораживает процесс, чтобы вы разрулили конфликты.

git status

git add <file>... to mark resolution

?? Что такое git pull --rebase



















